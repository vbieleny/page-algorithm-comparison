<!-- HTML header for doxygen 1.9.1-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Page Replacement Algorithm Comparison: User Manual</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
<script type="text/javascript">
    DoxygenAwesomeFragmentCopyButton.init()
</script>
<script type="text/javascript" src="doxygen-awesome-paragraph-link.js"></script>
<script type="text/javascript">
    DoxygenAwesomeParagraphLink.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Page Replacement Algorithm Comparison
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_README.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">User Manual </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This is a C framework for comparing page replacement algorithms on x86 architecture by using test suites. Testing such algoritms on a running operating system would be inaccurate, because the results would be influenced by many parts of a operating system. Therefore this framework runs on a bare machine by implementing a bootloader and a custom kernel for running test suites and page replacement algorithms.</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Dependencies</h1>
<p>Since this project compiles C code for specific architecture one of the dependencies is a GCC cross-compiler. For ease-of-use, you can use our <a href="https://github.com/vbieleny/prac-cli">CLI tool</a> to download and install a supported GCC toolchain.</p>
<p>Once you have installed the CLI tool, you can run this command to automatically download this framework and the GCC toolchain.</p>
<div class="fragment"><div class="line">prac init-toolchain</div>
</div><!-- fragment --><p>Other dependencies include NASM for assembling bootloader source code and other assembly files. For creating final bootable ISO file, you're gonna need a <code>mkisofs</code> tool. Finally, to execute the code you will need a QEMU for i386.</p>
<p>To install these dependencies on Ubuntu, execude this commands:</p>
<div class="fragment"><div class="line">sudo apt update</div>
<div class="line">sudo apt install build-essential nasm mkisofs qemu-system-i386</div>
</div><!-- fragment --><p>Optional dependencies for running framework tests are 32-bit GCC, which can be installed by executing this command for Ubuntu based systems:</p>
<div class="fragment"><div class="line">sudo apt install gcc-multilib</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md2"></a>
Usage</h1>
<p>The standard usage of this framework consists of these steps:</p>
<ol type="1">
<li>Create a new project</li>
<li>Write custom test programs and test suite</li>
<li>Write custom page replacement algorithms (optional)</li>
<li>Execute the project to see results of comparison</li>
<li>Analyze and display the results graphically via the <a href="https://github.com/vbieleny/prac-extension">VS Code extension</a></li>
</ol>
<h2><a class="anchor" id="autotoc_md3"></a>
Creating a new project</h2>
<p>To create a new project, just run</p>
<div class="fragment"><div class="line">prac create</div>
</div><!-- fragment --><p>This will initialize a new project in your current working directory.</p>
<h2><a class="anchor" id="autotoc_md4"></a>
Writing test programs and test suite</h2>
<p>After creating a new project, your project directory structure will look like this.</p>
<ul>
<li><code>.prac/</code> – build folder, that contains framework sources and compiled files or analysis results</li>
<li><code>src/</code> – source folder where your sources will go (test programs, test suites or page replacement algorithms)</li>
<li><code>prac.int</code> – configuration file with framework options</li>
</ul>
<p>To make creating test programs easier, there will be already a sample implementation of a test suite with two test programs.</p>
<p>Creating a test program is easy. It is just a function with no arguments and no return value that implements all the code you want to test (i.e. a sorting algorithm).</p>
<p>To run such a test program, we also need to define a test suite. This is done by creating a <code><a class="el" href="structtest__configuration__t.html">test_configuration_t</a></code> structure that contains which test programs are to be executed, what parameters to use and which page replacement algoritms to use.</p>
<p>After creating such configuration, you can execute it by calling <code>run_test_suite(configuration);</code></p>
<p>A very simple example of configuration definition si shown below.</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> setup()</div>
<div class="line">{</div>
<div class="line">    <a class="code" href="structtest__execution__t.html">test_execution_t</a> execution =</div>
<div class="line">    {</div>
<div class="line">        .name = <span class="stringliteral">&quot;Bubble Sort&quot;</span>,</div>
<div class="line">        .callback = test_bubble_sort</div>
<div class="line">    };</div>
<div class="line">    page_replacement_algorithm_e algorithm = pra_fifo;</div>
<div class="line">    <a class="code" href="structtest__parameters__t.html">test_parameters_t</a> parameters =</div>
<div class="line">    {</div>
<div class="line">        .pages_limit = 10,</div>
<div class="line">        .allocation_spread = 15,</div>
<div class="line">        .seed = 1</div>
<div class="line">    };</div>
<div class="line">    <a class="code" href="structtest__configuration__t.html">test_configuration_t</a> configuration =</div>
<div class="line">    {</div>
<div class="line">        .tests = &amp;execution,</div>
<div class="line">        .tests_length = 1,</div>
<div class="line">        .algorithms = &amp;algorithm,</div>
<div class="line">        .algorithms_length = 1,</div>
<div class="line">        .parameters = &amp;parameters,</div>
<div class="line">        .parameters_length = 1</div>
<div class="line">    };</div>
<div class="line"> </div>
<div class="line">    <a class="code" href="pra__suite_8h.html#a27c07f27ffa47886fb92db793d11e607">run_test_suite</a>(configuration);</div>
<div class="line">}</div>
</div><!-- fragment --><p>To use an "allocation spread" parameter in your test programs, use <code>void* user_memory_random_allocate(size_t size)</code> function to allocate your memory randomly in selected allocation spread.</p>
<h2><a class="anchor" id="autotoc_md5"></a>
Writing a page replacement algorithm</h2>
<p>This framework already implements some page replacement algorithms that you can use. You can find a list of these algoritms in [API reference](). To write a new page replacement algorithms, you need to create and implement a function that will handle page faults.</p>
<p>This function signature is defined like this:</p>
<div class="fragment"><div class="line"><span class="keyword">typedef</span> void (*page_replacement_function_t)(uint32_t error_code, <a class="code" href="structpage__fault__handler__result__t.html">page_fault_handler_result_t</a> *result);</div>
</div><!-- fragment --><p>First parameter <code>error_code</code> is an error code specified by system when generating a page fault exception. You can read more about the structure of this error code <a href="https://wiki.osdev.org/Exceptions#Page_Fault">here</a>.</p>
<p>Second parameter <code>result</code> is a pointer to a structure that will be used to aggregate statistical information about your page replacement algorithm. To get accurate results, you must use correctly fill the result structure when necessary. To ease filling this structure with all the information manually, you can use <code>page_fault_handler_result_fill</code> function to fill the results automatically by supplying the victim <code>page_table_entry_t</code> as a parameter.</p>
<p>There are two other optional functions that you can implement. Those are <code>page_replacement_init_function_t</code> and <code>page_replacement_destroy_function_t</code> functions. Initialization function will be called before each test program is executed. You can use this function to initialize variables that are needed for page fault handler algorithm. Destroy function is called after each test program execution is finished and must destroy all initalized data to provide accurate results.</p>
<p>You can see an implementation of Random page replacement algorithm [here]().</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Executing a project</h2>
<p>Executing a project is as simple as using a CLI tool. You can also build or clean your project with <code>prac clean</code> and <code>prac build</code> commands. To execute a project, just run this command in current project</p>
<div class="fragment"><div class="line">prac run</div>
</div><!-- fragment --><p>This will build your project, execute the test suite you specified and display a results. If you want to see better comparison of these results, we recommend you use a VS Code extension and it's provided functionality.</p>
<h1><a class="anchor" id="autotoc_md7"></a>
Using a VS Code extension</h1>
<p>The recommended usage of this framework is with a VS Code extension that supports editing, building and analyzing your projects. To download and install the extension, follow these <a href="https://github.com/vbieleny/prac-extension">instructions</a>.</p>
<p>When you have successfully installed the extension and have a existing project, you can open the folder in VS Code and the extension will be automatically activated. All commands that you can run use <code>PRAC</code> prefix. You can build, clean, run on analyze your project by running these commands from your command palette.</p>
<p><img src="images/commands_showcase.png" alt="Commands showcase" class="inline"/></p>
<p>The main benefit of this extension comes from ability to analyze the results of the test suite. To analyze your project, just execute the command <code>PRAC: Analyze</code>, which will build your project, execute it and parse the results to show in charts and tables.</p>
<p><img src="images/analysis_showcase.png" alt="Analysis showcase" class="inline"/></p>
<h1><a class="anchor" id="autotoc_md8"></a>
Tests</h1>
<p>To run framework tests, you can execute <code>make test</code>, which will execude all tests in the <code>test</code> folder and display the results.</p>
<blockquote class="doxtable">
<p>:warning: If you are on a x64_86 machine, you need to first install 32-bit GCC version </p>
</blockquote>
<h1><a class="anchor" id="autotoc_md9"></a>
API Reference</h1>
<p>For more technical documentation and implementation details, check out the <a href="https://vbieleny.github.io/page-algorithm-comparison/files.html">API reference</a>.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
License</h1>
<p>Distributed under the MIT License. See LICENSE.txt for more information. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="apra__suite_8h_html_a27c07f27ffa47886fb92db793d11e607"><div class="ttname"><a href="pra__suite_8h.html#a27c07f27ffa47886fb92db793d11e607">run_test_suite</a></div><div class="ttdeci">void run_test_suite(test_configuration_t configuration)</div><div class="ttdoc">Run the test suite specified as parameter.</div></div>
<div class="ttc" id="astructtest__configuration__t_html"><div class="ttname"><a href="structtest__configuration__t.html">test_configuration_t</a></div><div class="ttdef"><b>Definition:</b> pra_suite.h:33</div></div>
<div class="ttc" id="astructpage__fault__handler__result__t_html"><div class="ttname"><a href="structpage__fault__handler__result__t.html">page_fault_handler_result_t</a></div><div class="ttdef"><b>Definition:</b> pra_paging.h:28</div></div>
<div class="ttc" id="astructtest__parameters__t_html"><div class="ttname"><a href="structtest__parameters__t.html">test_parameters_t</a></div><div class="ttdef"><b>Definition:</b> pra_suite.h:26</div></div>
<div class="ttc" id="astructtest__execution__t_html"><div class="ttname"><a href="structtest__execution__t.html">test_execution_t</a></div><div class="ttdef"><b>Definition:</b> pra_suite.h:20</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
